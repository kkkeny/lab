<!doctype html>
<html>
    <head>
        <title>loop fly bird</title>
        <link href="style.css" media="screen" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <div id="stage_wxc">
            <div id="layout">
                <div id="bird">
                    
                </div>    
            </div>
        </div>
        <script type="text/javascript">
            var width = document.getElementById('stage_wxc').offsetWidth;
            var move = document.getElementById('layout'),
                bird = document.getElementById('bird');
            
            var flag = false;
            move.addEventListener("webkitAnimationIteration", function(e){                
                if(!flag){
                    if(this.offsetLeft > width-30){
                        this.className = 'back';
                        flag = true;
                    }else{
                        this.className = '';
                    }
                }else{
                    if(this.offsetLeft < 30){
                        this.className = '';
                        flag = false;
                    }else{
                        this.className = 'back';
                    }
                }
            }, false);
        </script>
    </body>
</html>