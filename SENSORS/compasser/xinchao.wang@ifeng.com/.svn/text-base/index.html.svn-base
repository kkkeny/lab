<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<meta name="viewport" content="width=device-width; initial-scale=1.0,user-scalable=no" />
<title>Compass</title>
<style>
	body{
		background: #fff;
	}
  .n {
    top: 50%;
    left:50%;
    margin-left:-150px;
    margin-top:-150px; 
    width:300px;
    height:300px;
    position:absolute;
    background: url(compass.jpg) no-repeat 0 0;
    -webkit-background-size:300px 300px;
    -webkit-transform-origin: 50% 50%;
    z-index: -1;
  }
  </style>
  <script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
</head>
<body>
	<h3></h3>
  <div class="n"></div>
  <div class="pointer"></div>
<script>
$(document).ready(function() {
  var rotate = function (deg) {  
      $(".n").css({ "-webkit-transform": "rotate(0deg)"});
      $(".n").css({ "-webkit-transform": "rotate(" + deg + "deg)"});
  };
  var txt  = $('h3');
  if (window.DeviceOrientationEvent) {
    window.addEventListener("deviceorientation", function (e) {
      rotate( e.alpha);
      txt.text(360 - e.alpha)
    }, false);
  }
  
});
</script>
  </body>
</html>